(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1152:function(e,n,t){Promise.resolve().then(t.bind(t,68157))},68157:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var i=t(57437),s=t(2265),o=t(52289);function d(){let[e,n]=(0,s.useState)(null),[t,d]=(0,s.useState)(null),a=(0,s.useMemo)(()=>new o.BskyAgent({service:"https://".concat("api.bsky.app")}),[]),l=async()=>{let e=prompt("Bluesky handle (e.g. alice.bsky.social)"),t=prompt("App Password (not your main password)");if(e&&t)try{var i;await a.login({identifier:e,password:t});let s=await a.getProfile({actor:e}),o=(null===(i=a.session)||void 0===i?void 0:i.did)||s.data.did,d=s.data.handle;n({did:o,handle:d})}catch(e){alert("Login failed"),console.error(e)}},c=async()=>{if(t||!e)return;let n=await fetch("".concat("http://localhost:8080","/ready_for_round"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tid:"demo",round:1,did:e.did})}),{match_id:i,ticket:s}=await n.json(),o=new WebSocket("".concat("ws://localhost:8080/ws","?ticket=").concat(encodeURIComponent(s)));o.onopen=()=>{o.send(JSON.stringify({type:"READY_FOR_ROUND",data:{tid:"demo",round:1}}))},o.onmessage=e=>{console.log("WS message",e.data)},o.onclose=()=>d(null),d(o)};return(0,i.jsxs)("main",{style:{display:"flex",flexDirection:"column",gap:16,padding:24},children:[(0,i.jsx)("h1",{children:"Peace.Zone RPS"}),e?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:["Signed in as: ",(0,i.jsx)("strong",{children:e.handle})," (",e.did,")"]}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,marginTop:12},children:[(0,i.jsx)("button",{style:{padding:12},children:"Register"}),(0,i.jsx)("button",{onClick:c,style:{padding:12},children:"Connect"})]})]}):(0,i.jsx)("button",{onClick:l,style:{padding:12},children:"Sign in with Bluesky"}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{children:"Audit"}),(0,i.jsx)("p",{children:"Round anchors and logs will be listed here for public verification."})]})]})}}},function(e){e.O(0,[684,985,156,971,23,744],function(){return e(e.s=1152)}),_N_E=e.O()}]);