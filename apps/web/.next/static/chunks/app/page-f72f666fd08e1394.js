(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1152:function(e,n,i){Promise.resolve().then(i.bind(i,68157))},68157:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return d}});var t=i(57437),s=i(2265),o=i(52289);function d(){let[e,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[a,l]=(0,s.useState)([]),r=(0,s.useMemo)(()=>new o.BskyAgent({service:"https://".concat("api.bsky.app")}),[]),c=async()=>{let e=prompt("Bluesky handle (e.g. alice.bsky.social)"),i=prompt("App Password (not your main password)");if(e&&i)try{var t;await r.login({identifier:e,password:i});let s=await r.getProfile({actor:e}),o=(null===(t=r.session)||void 0===t?void 0:t.did)||s.data.did,d=s.data.handle;n({did:o,handle:d})}catch(e){alert("Login failed"),console.error(e)}},u=async()=>{if(i||!e)return;let n=await fetch("".concat("http://localhost:8080","/ready_for_round"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tid:"demo",round:1,did:e.did})}),{match_id:t,ticket:s}=await n.json(),o=new WebSocket("".concat("ws://localhost:8080/ws","?ticket=").concat(encodeURIComponent(s)));o.onopen=()=>{o.send(JSON.stringify({type:"READY_FOR_ROUND",data:{tid:"demo",round:1}}))},o.onmessage=e=>{l(n=>[String(e.data),...n].slice(0,50))},o.onclose=()=>d(null),d(o)};return(0,t.jsxs)("main",{style:{display:"flex",flexDirection:"column",gap:16,padding:24},children:[(0,t.jsx)("h1",{children:"Peace.Zone RPS"}),e?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["Signed in as: ",(0,t.jsx)("strong",{children:e.handle})," (",e.did,")"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,marginTop:12},children:[(0,t.jsx)("button",{style:{padding:12},children:"Register"}),(0,t.jsx)("button",{onClick:u,style:{padding:12},children:"Connect"})]})]}):(0,t.jsx)("button",{onClick:c,style:{padding:12},children:"Sign in with Bluesky"}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"Audit"}),(0,t.jsx)("p",{children:"Round anchors and logs will be listed here for public verification."}),!!a.length&&(0,t.jsx)("pre",{style:{whiteSpace:"pre-wrap",background:"#111",color:"#eee",padding:12,borderRadius:6},children:a.join("\n")})]})]})}}},function(e){e.O(0,[684,985,156,971,23,744],function(){return e(e.s=1152)}),_N_E=e.O()}]);